#pragma once

_WNAME_BEGIN
namespace handle
{
	/** реализация описателя в классе */
	class WNAME CHandle
	{
	#pragma region Public_Method
	public:
	//==========================================================================
		/**
		* конструктор по умолчанию.
		*/
		CHandle() noexcept = default;
	//==========================================================================
		/**
		* конструктор из описателя.
		* @param hObject - новый описатель.
		*/
		CHandle(
			const HANDLE hObject);
	//==========================================================================
		/**
		* конструктор копирования.
		* @param handle - описатель копирования.
		*/
		CHandle(
			const CHandle& handle) noexcept;
	//==========================================================================
		/**
		* конструктор перемещения.
		* @param handle - описатель перемещения.
		*/
		CHandle(
			CHandle&& handle) noexcept;
	//==========================================================================
		/**
		* проверить валидность.
		* @return - результат проверки.
		*/
		bool isValid() const noexcept;
	//==========================================================================
		/**
		* проверить валидность.
		* @param hObject - описатель.
		* @return - результат проверки.
		*/
		static bool isValid(
			const HANDLE hObject) noexcept;
	//==========================================================================
		/**
		* получить описатель.
		* @return - описатель.
		*/
		HANDLE getHandle() const noexcept;
	//==========================================================================
		/**
		* закрыть описатель.
		*/
		void close() noexcept;
	//==========================================================================
		/**
		* оператор присвоения описателя.
		* @param hObject - новый описатель.
		* @return - текущий объект.
		*/
		virtual CHandle& operator=(
			const HANDLE hObject);
	//==========================================================================
		/**
		* оператор копирования описателя.
		* @param handle - копируемый объект.
		* @return - текущий объект.
		*/
		virtual CHandle& operator=(
			const CHandle& handle) noexcept;
	//==========================================================================
		/**
		* оператор перемещения описателя.
		* @param handle - перемещаемый объект.
		* @return - текущий объект.
		*/
		virtual CHandle& operator=(
			CHandle&& handle) noexcept;
	//==========================================================================
		/**
		* оператор получения описателя.
		* @return - описатель.
		*/
		operator HANDLE() const noexcept;
	//==========================================================================
		/**
		* деструктор.
		*/
		virtual ~CHandle();
	//==========================================================================
	#pragma endregion

	#pragma region Protected_Data
	protected:
	//==========================================================================
		/** описатель */
		std::shared_ptr<void> _pHandle;
	//==========================================================================
	#pragma endregion
	};
}
_WNAME_END